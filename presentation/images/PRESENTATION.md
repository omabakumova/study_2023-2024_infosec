---
## Front matter
lang: ru-RU
title: "Лабораторная работа №2. Дискреционное
разграничение прав в Linux. Основные
атрибуты"
author: |
	Абакумова О.М.; НКАбд-01-22
	

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

## Цель работы

Получение практических навыков работы в консоли с атрибутами фай-
лов, закрепление теоретических основ дискреционного разграничения до-
ступа в современных системах с открытым кодом на базе ОС Linux .

## Задание

1. В установленной при выполнении предыдущей лабораторной работы
операционной системе создайте учётную запись пользователя guest (ис-
пользую учётную запись администратора):
useradd guest
2. Задайте пароль для пользователя guest (использую учётную запись ад-
министратора):
passwd guest
3. Войдите в систему от имени пользователя guest.
4. Определите директорию, в которой вы находитесь, командой pwd. Сравните её с приглашением командной строки. Определите, является ли она
вашей домашней директорией? Если нет, зайдите в домашнюю директорию.
5. Уточните имя вашего пользователя командой whoami.
6. Уточните имя вашего пользователя, его группу, а также группы, куда входит пользователь, командой id. Выведенные значения uid, gid и др. запомните. Сравните вывод id с выводом команды groups.
7. Сравните полученную информацию об имени пользователя с данными,выводимыми в приглашении командной строки.
8. Просмотрите файл /etc/passwd командой
cat /etc/passwd
Найдите в нём свою учётную запись. Определите uid пользователя.Определите gid пользователя. Сравните найденные значения с полученными в предыдущих пунктах.
Замечание: в случае, когда вывод команды не умещается на одном экране монитора, используйте прокрутку вверх–вниз (удерживая клавишу shift, нажимайте page up и page down) либо программу grep в качестве фильтра для вывода только строк, содержащих определённые буквенные сочетания:
cat /etc/passwd | grep guest
9. Определите существующие в системе директории командой
ls -l /home/
Удалось ли вам получить список поддиректорий директории /home? Какие права установлены на директориях?
10. Проверьте, какие расширенные атрибуты установлены на поддиректориях, находящихся в директории /home, командой:
lsattr /home
Удалось ли вам увидеть расширенные атрибуты директории?
Удалось ли вам увидеть расширенные атрибуты директорий других
пользователей?
11. Создайте в домашней директории поддиректорию dir1 командой
mkdir dir1
Определите командами ls -l и lsattr, какие права доступа и расширенные атрибуты были выставлены на директорию dir1.
12. Снимите с директории dir1 все атрибуты командой
chmod 000 dir1
и проверьте с её помощью правильность выполнения команды
ls -l
13. Попытайтесь создать в директории dir1 файл file1 командой
echo "test" > /home/guest/dir1/file1
Объясните, почему вы получили отказ в выполнении операции по созданию файла?
Оцените, как сообщение об ошибке отразилось на создании файла? Проверьте командой
ls -l /home/guest/dir1
действительно ли файл file1 не находится внутри директории dir1.
14. Заполните таблицу «Установленные права и разрешённые действия»
(см. табл. 2.1), выполняя действия от имени владельца директории (файлов), определив опытным путём, какие операции разрешены, а какие нет.
Если операция разрешена, занесите в таблицу знак «+», если не разрешена, знак «-».
Замечание 1: при заполнении табл. 2.1 рассматриваются не все атрибу-
ты файлов и директорий, а лишь «первые три»: г, w, х, для «владельца».
Остальные атрибуты также важны (особенно при использовании доступа от имени разных пользователей, входящих в те или иные группы).
Проверка всех атрибутов при всех условиях значительно увеличила бы таблицу: так 9 атрибутов на директорию и 9 атрибутов на файл дают 218 строк без учёта дополнительных атрибутов, плюс таблица была бы расширена по количеству столбцов, так как все приведённые операциинеобходимо было бы повторить ещё как минимум для двух пользователей: входящего в группу владельца файла и не входящего в неё.
После полного заполнения табл. 2.1 и анализа полученных данных нам удалось бы выяснить, что заполнение её в таком виде излишне. Можно разделить большую таблицу на несколько малых независимых таблиц.
В данном примере предлагается рассмотреть 3 + 3 атрибута, т.е. 26 = 64
варианта.
Замечание 2: в ряде действий при выполнении команды удаления файла вы можете столкнуться с вопросом: «удалить защищённый от записи пустой обычный файл dir1/file1?» Обратите внимание, что наличие этого вопроса не позволяет сделать правильный вывод о том, что файл мож-
но удалить. В ряде случаев, при ответе «y» (да) на указанный вопрос,возможно получить другое сообщение: «невозможно удалить dirl /file1:
Отказано в доступе».
15. На основании заполненной таблицы определите те или иные минимально необходимые права для выполнения операций внутри директории
dir1, заполните табл. 2.2.




## Теоретическое введение

Дискреционное управление доступом - права доступа состоят из трех компонентов: владелец файла, группа владельца и остальные пользователи. Каждому компоненту присваивается разрешение на чтение (r), запись (w) и выполнение (x). Для управления правами доступа в Linux используются команды chmod, chown и chgrp.

## Выполнение лабораторной работы

1. В установленной при выполнении предыдущей лабораторной работы
операционной системе создайте учётную запись пользователя guest (ис-
пользую учётную запись администратора):
useradd guest

2. Задаем пароль для пользователя guest (использую учётную запись ад-
министратора):
passwd guest

![Команда useradd guest](images/1.png){#fig:001 width=70%}

Далее,переходим с учетной записи на которой находились на новую,созданную учетную запись.


## Выполнение лабораторной работы

3. Входим в систему от имени guest.

![Успешный вход в новую учетную запись и переход в терминал](images/2.png){#fig:002 width=70%}

## Выполнение лабораторной работы

4. Определяем директорию, в которой находимся, командой pwd. 

![Использование команды pwd](images/3.png){#fig:003 width=70%}

Директория является домашней.

## Выполнение лабораторной работы

5. Уточняем имя пользователя командой whoami.

![Использование команды whoami ](images/4.png){#fig:004 width=70%}

## Выполнение лабораторной работы

6. Уточняем имя пользователя, его группу, а также группы, куда вхо-
дит пользователь, командой id. Выведенные значения uid, gid и др. за-
поминаем.

![Использование команды id для получения необходимой информации ](images/5.png){#fig:005 width=70%}

При вводе команды groups нам дают более кнкретную информацию о пользователе,в случае с id мы получаем более подробную о пользователе.


## Выполнение лабораторной работы
7. Просматриваем файл /etc/passwd командой
cat /etc/passwd

![Используем команду cat /etc/passwd и находим нашу учетную запись,uid,gid(часть1)](images/6.png){#fig:006 width=70%}

![Используем команду cat /etc/passwd и находим нашу учетную запись,uid,gid(часть2)](images/7.png){#fig:007 width=70%}

Дополнительно используем команду cat /etc/passwd | grep guest в
качестве фильтра для вывода только строк, содержащих определённые
буквенные сочетания

![Используем команду grep ](images/8.png){#fig:008 width=70%}

## Выполнение лабораторной работы

9. Определяем существующие в системе директории командой
ls -l /home/

![Используем команду ls -l /home/ ](images/9.png){#fig:009 width=70%}

Мы получили необходимую нам информацию о директориях и о правах.


![Копирование и перемещение файла, копирование каталога в другой каталог](image/15.jpeg){ #fig:015 width=70% }

## Выполнение лабораторной работы

10. Проверим, какие расширенные атрибуты установлены на поддиректо-
риях, находящихся в директории /home, командой:
lsattr /home

![Используем команду lsattr /home ](images/10.png){#fig:010 width=70%}

Нам запрещен доступ.

## Выполнение лабораторной работы

11. Создаем в домашней директории поддиректорию dir1 командой
mkdir dir1.Определяем командами ls -l и lsattr, какие права доступа и расширенные атрибуты были выставлены на директорию dir1.

![Создаем поддиректорию dir1 командой mkdir dir1,задействуем команды ls -l и lsattr](images/11.png){#fig:011 width=70}


## Выполнение лабораторной работы

12. Снимаем с директории dir1 все атрибуты командой
chmod 000 dir1 и проверяем с её помощью правильность выполнения команды ls -l

![Использование команд chmod 000 dir1 и ls -l ](images/12.png){#fig:012 width=70%}


## Выполнение лабораторной работы

13. Попытка создать в директории dir1 файл file1 командой echo "test" > /home/guest/dir1/file1.

![Использование команды echo "test" > /home/guest/dir1/file1.](images/13.png){#fig:013 width=70%}

Мы получили отказ в связи с тем,что сняли все атрибуты с этой директории в прошлом пункте.

Проверка командой ls -l /home/guest/dir1

![Использование команды ls -l /home/guest/dir1](images/14.png){#fig:014 width=70%}

## Выполнение лабораторной работы

14. Заполняем таблицу «Установленные права и разрешённые действия»
(см. табл. 2.1), выполняя действия от имени владельца директории (фай-
лов), определив опытным путём, какие операции разрешены, а какие нет.
Если операция разрешена, заносим в таблицу знак «+», если не разре-
шена, знак «-».

![Пример таблицы "Установленные права и разрешённые действия" ](images/15.png){#fig:015 width=70%}

| | | | | | | | | | |
|-|-|-|-|-|-|-|-|-|-|
|Права директории|Права файла|Создание файла|Удаление файла|Запись в файл|Чтение файла|Смена директории|Просмотр файлов в директории|Переименование файла|Смена атрибутов файла|
|d(000)|(000)|-|-|-|-|-|-|-|-|
|d(000)|(100)|-|-|-|-|-|-|-|-|
|d(000)|(200)|-|-|-|-|-|-|-|-|
|d(000)|(300)|-|-|-|-|-|-|-|-|
|d(000)|(400)|-|-|-|-|-|-|-|-|
|d(000)|(500)|-|-|-|-|-|-|-|-|
|d(000)|(600)|-|-|-|-|-|-|-|-|
|d(000)|(700)|-|-|-|-|-|-|-|-|
|d(100)|(000)|-|-|-|-|+|-|-|+|
|d(100)|(100)|-|-|-|-|+|-|-|+|
|d(100)|(200)|-|-|+|-|-|-|-|-|
|d(100)|(300)|-|-|+|-|+|-|-|+|
|d(100)|(400)|-|-|-|+|-|-|-|-|
|d(100)|(500)|-|-|-|+|+|-|-|+|
|d(100)|(600)|-|-|+|+|+|-|-|+|
|d(100)|(700)|-|-|+|+|+|-|-|+|
|d(200)|(000)|-|-|-|-|-|-|-|-|
|d(200)|(100)|-|-|-|-|-|-|-|-|
|d(200)|(200)|-|-|-|-|-|-|-|-|
|d(200)|(300)|-|-|-|-|-|-|-|-|
|d(200)|(400)|-|-|-|-|-|-|-|-|
|d(200)|(500)|-|-|-|-|-|-|-|-|
|d(200)|(600)|-|-|-|-|-|-|-|-|
|d(200)|(700)|-|-|-|-|-|-|-|-|
|d(300)|(000)|+|+|-|-|+|-|+|+|
|d(300)|(100)|+|+|-|-|+|-|+|+|
|d(300)|(200)|+|+|+|-|+|-|+|+|
|d(300)|(300)|+|+|+|-|+|-|+|+|
|d(300)|(400)|+|+|-|+|+|-|+|+|
|d(300)|(500)|+|+|-|+|+|-|+|+|
|d(300)|(600)|+|+|+|+|+|-|+|+|
|d(300)|(700)|+|+|+|+|+|-|+|+|
|d(400)|(000)|-|-|-|-|-|+|-|-|
|d(400)|(100)|-|-|-|-|-|+|-|-|
|d(400)|(200)|-|-|-|-|-|+|-|-|
|d(400)|(300)|-|-|-|-|-|+|-|-|
|d(400)|(400)|-|-|-|-|-|+|-|-|
|d(400)|(500)|-|-|-|-|-|+|-|-|
|d(400)|(600)|-|-|-|-|-|+|-|-|
|d(400)|(700)|-|-|-|-|-|+|-|-|
|d(500)|(000)|-|-|-|-|+|+|-|+|
|d(500)|(100)|-|-|-|-|+|+|-|+|
|d(500)|(200)|-|-|+|-|+|+|-|+|
|d(500)|(300)|-|-|+|-|+|+|-|+|
|d(500)|(400)|-|-|-|+|+|+|-|+|
|d(500)|(500)|-|-|-|+|+|+|-|+|
|d(500)|(600)|-|-|+|+|+|+|-|+|
|d(500)|(700)|-|-|+|+|+|+|-|+|
|d(600)|(000)|-|-|-|-|-|+|-|-|
|d(600)|(100)|-|-|-|-|-|+|-|-|
|d(600)|(200)|-|-|-|-|-|+|-|-|
|d(600)|(300)|-|-|-|-|-|+|-|-|
|d(600)|(400)|-|-|-|-|-|+|-|-|
|d(600)|(500)|-|-|-|-|-|+|-|-|
|d(600)|(600)|-|-|-|-|-|+|-|-|
|d(600)|(700)|-|-|-|-|-|+|-|-|
|d(700)|(000)|+|+|-|-|+|+|+|+|
|d(700)|(100)|+|+|-|-|+|+|+|+|
|d(700)|(200)|+|+|+|-|+|+|+|+|
|d(700)|(300)|+|+|+|-|+|+|+|+|
|d(700)|(400)|+|+|-|+|+|+|+|+|
|d(700)|(500)|+|+|-|+|+|+|+|+|
|d(700)|(600)|+|+|+|+|+|+|+|+|
|d(700)|(700)|+|+|+|+|+|+|+|+|

## Выполнение лабораторной работы

15. На основании заполненной таблицы определяем те или иные минималь-
но необходимые права для выполнения операций внутри директории
dir1.

![Пример таблицы "Минимальные права для совершения операций" ](images/16.png){#fig:016 width=70%}

| | | | | |
|-|-|-|-|-|
|Операция|Минимальные права на директорию|Минимальные права на файл|
|Создание файла| |d(300)| |(000)|
|Удаление файла| |d(300)| |(000)|
|Чтение файла| |d(100)| |(400)|
|Запись в файл| |d(100)| |(200)|
|Переименование файла| |d(300)| |(000)|
|Создание поддиректории| |d(300)| |(000)|
|Удаление поддиректории| |d(300)| |(000)|
## Выводы

Выполняя данную лабораторную работы,мы получили практические навыки работы в консоли с атрибутами файлов и закрепили теоретические основы дискреционного разграничения доступа в современных системах с открытым кодом на базе ОС Linux.


## Список литературы

[1.О правах доступа в ОС](https://vk.com/away.php?utf=1&to=https%3A%2F%2Fhabr.com%2Fru%2Farticles%2F469667%2F)
[2.Подробнее о дискреционном разграничении прав](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjjnvnGlNSEAxUmLhAIHY2AD5wQFnoECA0QAw&url=https%3A%2F%2Fitcloud-edu.ru%2Finfo%2Farticles%2Fupravlenie-dostupom-v-gnu-linux%2F&usg=AOvVaw0AZKOfJmBKY3JGoaVnzpqQ&opi=89978449)


## {.standout}

Спасибо за внимание!
